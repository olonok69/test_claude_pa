<svg width="1600" height="1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1600" height="1200" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="800" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#2c3e50">
    Complete Veterinary Show Data Pipeline Map
  </text>
  <text x="800" y="55" text-anchor="middle" font-size="14" fill="#7f8c8d">
    Documentation - All 10 Pipeline Steps Active
  </text>
  
  <!-- Legend -->
  <g transform="translate(50, 80)">
    <rect x="0" y="0" width="400" height="100" fill="#ecf0f1" stroke="#bdc3c7" rx="5"/>
    <text x="10" y="20" font-size="14" font-weight="bold" fill="#2c3e50">Legend</text>
    
    <rect x="10" y="30" width="15" height="15" fill="#3498db"/>
    <text x="30" y="42" font-size="12" fill="#2c3e50">Input Files</text>
    
    <rect x="10" y="50" width="15" height="15" fill="#e74c3c"/>
    <text x="30" y="62" font-size="12" fill="#2c3e50">Data Processing</text>
    
    <rect x="10" y="70" width="15" height="15" fill="#f39c12"/>
    <text x="30" y="82" font-size="12" fill="#2c3e50">Neo4j Processing</text>
    
    <rect x="150" y="30" width="15" height="15" fill="#9b59b6"/>
    <text x="170" y="42" font-size="12" fill="#2c3e50">ML/AI Processing</text>
    
    <rect x="150" y="50" width="15" height="15" fill="#2ecc71"/>
    <text x="170" y="62" font-size="12" fill="#2c3e50">Output Files</text>
    
    <rect x="150" y="70" width="15" height="15" fill="#34495e"/>
    <text x="170" y="82" font-size="12" fill="#2c3e50">Neo4j Database</text>
  </g>
  
  <!-- Input Files Section -->
  <g transform="translate(50, 200)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#2c3e50">INPUT FILES</text>
    
    <!-- Registration Data -->
    <rect x="0" y="20" width="180" height="70" fill="#3498db" rx="5"/>
    <text x="10" y="40" font-size="12" font-weight="bold" fill="white">Registration Data</text>
    <text x="10" y="55" font-size="10" fill="white">BVA24_BVA25.json</text>
    <text x="10" y="70" font-size="10" fill="white">LVS24.json</text>
    
    <!-- Demographics -->
    <rect x="200" y="20" width="180" height="70" fill="#3498db" rx="5"/>
    <text x="210" y="40" font-size="12" font-weight="bold" fill="white">Demographics</text>
    <text x="210" y="55" font-size="10" fill="white">demographics_BVA24.json</text>
    <text x="210" y="70" font-size="10" fill="white">demographics_LVS24.json</text>
    
    <!-- Session Data -->
    <rect x="400" y="20" width="180" height="70" fill="#3498db" rx="5"/>
    <text x="410" y="40" font-size="12" font-weight="bold" fill="white">Session Data</text>
    <text x="410" y="55" font-size="10" fill="white">BVA25_session_export.csv</text>
    <text x="410" y="70" font-size="10" fill="white">BVA24_session_export.csv</text>
    
    <!-- Scan Data -->
    <rect x="600" y="20" width="180" height="70" fill="#3498db" rx="5"/>
    <text x="610" y="40" font-size="12" font-weight="bold" fill="white">Scan Data</text>
    <text x="610" y="55" font-size="10" fill="white">seminar scans reference.csv</text>
    <text x="610" y="70" font-size="10" fill="white">seminar scans.csv</text>
    
    <!-- Stream Mappings -->
    <rect x="800" y="20" width="180" height="70" fill="#3498db" rx="5"/>
    <text x="810" y="40" font-size="12" font-weight="bold" fill="white">Stream Mappings</text>
    <text x="810" y="55" font-size="10" fill="white">job_to_stream.csv</text>
    <text x="810" y="70" font-size="10" fill="white">specialization_to_stream.csv</text>
    
    <!-- Practices -->
    <rect x="1000" y="20" width="150" height="70" fill="#3498db" rx="5"/>
    <text x="1010" y="40" font-size="12" font-weight="bold" fill="white">Practices</text>
    <text x="1010" y="55" font-size="10" fill="white">practices_missing.csv</text>
  </g>
  
  <!-- Processing Steps Section -->
  <g transform="translate(50, 350)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#2c3e50">PROCESSING STEPS</text>
    
    <!-- Row 1: Data Processing Steps -->
    <rect x="0" y="30" width="180" height="90" fill="#e74c3c" rx="5"/>
    <text x="10" y="50" font-size="12" font-weight="bold" fill="white">Step 1</text>
    <text x="10" y="65" font-size="11" font-weight="bold" fill="white">Registration Processing</text>
    <text x="10" y="80" font-size="9" fill="white">Process JSON files</text>
    <text x="10" y="95" font-size="9" fill="white">Merge demographics</text>
    <text x="10" y="110" font-size="9" fill="white">Validate badges</text>
    
    <rect x="200" y="30" width="180" height="90" fill="#e74c3c" rx="5"/>
    <text x="210" y="50" font-size="12" font-weight="bold" fill="white">Step 2</text>
    <text x="210" y="65" font-size="11" font-weight="bold" fill="white">Scan Processing</text>
    <text x="210" y="80" font-size="9" fill="white">Process scan data</text>
    <text x="210" y="95" font-size="9" fill="white">Link references</text>
    <text x="210" y="110" font-size="9" fill="white">Create attendance</text>
    
    <rect x="400" y="30" width="180" height="90" fill="#e74c3c" rx="5"/>
    <text x="410" y="50" font-size="12" font-weight="bold" fill="white">Step 3</text>
    <text x="410" y="65" font-size="11" font-weight="bold" fill="white">Session Processing</text>
    <text x="410" y="80" font-size="9" fill="white">Process sessions</text>
    <text x="410" y="95" font-size="9" fill="white">Create streams</text>
    <text x="410" y="110" font-size="9" fill="white">Filter and validate</text>
    
    <!-- Row 2: Neo4j Processing Steps -->
    <rect x="0" y="140" width="180" height="90" fill="#f39c12" rx="5"/>
    <text x="10" y="160" font-size="12" font-weight="bold" fill="white">Step 4</text>
    <text x="10" y="175" font-size="11" font-weight="bold" fill="white">Neo4j Visitors</text>
    <text x="10" y="190" font-size="9" fill="white">Create visitor nodes</text>
    <text x="10" y="205" font-size="9" fill="white">Set properties</text>
    <text x="10" y="220" font-size="9" fill="white">Upload to Neo4j</text>
    
    <rect x="200" y="140" width="180" height="90" fill="#f39c12" rx="5"/>
    <text x="210" y="160" font-size="12" font-weight="bold" fill="white">Step 5</text>
    <text x="210" y="175" font-size="11" font-weight="bold" fill="white">Neo4j Sessions</text>
    <text x="210" y="190" font-size="9" fill="white">Create session nodes</text>
    <text x="210" y="205" font-size="9" fill="white">Link to streams</text>
    <text x="210" y="220" font-size="9" fill="white">Upload relationships</text>
    
    <rect x="400" y="140" width="180" height="90" fill="#f39c12" rx="5"/>
    <text x="410" y="160" font-size="12" font-weight="bold" fill="white">Step 6</text>
    <text x="410" y="175" font-size="11" font-weight="bold" fill="white">Job-Stream Mapping</text>
    <text x="410" y="190" font-size="9" fill="white">Map jobs to streams</text>
    <text x="410" y="205" font-size="9" fill="white">Create relationships</text>
    <text x="410" y="220" font-size="9" fill="white">Use job_to_stream.csv</text>
    
    <rect x="600" y="140" width="180" height="90" fill="#f39c12" rx="5"/>
    <text x="610" y="160" font-size="12" font-weight="bold" fill="white">Step 7</text>
    <text x="610" y="175" font-size="11" font-weight="bold" fill="white">Specialization Mapping</text>
    <text x="610" y="190" font-size="9" fill="white">Map specializations</text>
    <text x="610" y="205" font-size="9" fill="white">Create relationships</text>
    <text x="610" y="220" font-size="9" fill="white">Use specialization.csv</text>
    
    <rect x="800" y="140" width="180" height="90" fill="#f39c12" rx="5"/>
    <text x="810" y="160" font-size="12" font-weight="bold" fill="white">Step 8</text>
    <text x="810" y="175" font-size="11" font-weight="bold" fill="white">Visitor Relationships</text>
    <text x="810" y="190" font-size="9" fill="white">Link same visitors</text>
    <text x="810" y="205" font-size="9" fill="white">Cross-year matching</text>
    <text x="810" y="220" font-size="9" fill="white">Same_Visitor links</text>
    
    <!-- Row 3: ML/AI Processing Steps -->
    <rect x="200" y="250" width="180" height="90" fill="#9b59b6" rx="5"/>
    <text x="210" y="270" font-size="12" font-weight="bold" fill="white">Step 9</text>
    <text x="210" y="285" font-size="11" font-weight="bold" fill="white">Session Embeddings</text>
    <text x="210" y="300" font-size="9" fill="white">Generate embeddings</text>
    <text x="210" y="315" font-size="9" fill="white">all-MiniLM-L6-v2</text>
    <text x="210" y="330" font-size="9" fill="white">Batch size: 100</text>
    
    <rect x="400" y="250" width="180" height="90" fill="#9b59b6" rx="5"/>
    <text x="410" y="270" font-size="12" font-weight="bold" fill="white">Step 10</text>
    <text x="410" y="285" font-size="11" font-weight="bold" fill="white">Recommendations</text>
    <text x="410" y="300" font-size="9" fill="white">Generate recommendations</text>
    <text x="410" y="315" font-size="9" fill="white">Min similarity: 0.3</text>
    <text x="410" y="330" font-size="9" fill="white">Max recs: 10</text>
  </g>
  
  <!-- Output Files Section -->
  <g transform="translate(50, 720)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#2c3e50">OUTPUT FILES</text>
    
    <!-- Registration Outputs -->
    <rect x="0" y="20" width="200" height="80" fill="#2ecc71" rx="5"/>
    <text x="10" y="40" font-size="12" font-weight="bold" fill="white">Registration Outputs</text>
    <text x="10" y="55" font-size="9" fill="white">Registration_data_bva_25_valid.csv</text>
    <text x="10" y="70" font-size="9" fill="white">Registration_data_bva_24_valid.csv</text>
    <text x="10" y="85" font-size="9" fill="white">df_reg_demo_this.csv</text>
    
    <!-- Scan Outputs -->
    <rect x="220" y="20" width="200" height="80" fill="#2ecc71" rx="5"/>
    <text x="230" y="40" font-size="12" font-weight="bold" fill="white">Scan Outputs</text>
    <text x="230" y="55" font-size="9" fill="white">scan_bva_past.csv</text>
    <text x="230" y="70" font-size="9" fill="white">scan_lva_past.csv</text>
    <text x="230" y="85" font-size="9" fill="white">sessions_visited_last_bva.csv</text>
    
    <!-- Session Outputs -->
    <rect x="440" y="20" width="200" height="80" fill="#2ecc71" rx="5"/>
    <text x="450" y="40" font-size="12" font-weight="bold" fill="white">Session Outputs</text>
    <text x="450" y="55" font-size="9" fill="white">session_this_filtered_valid.csv</text>
    <text x="450" y="70" font-size="9" fill="white">session_last_filtered_bva.csv</text>
    <text x="450" y="85" font-size="9" fill="white">streams.json</text>
    
    <!-- ML Outputs -->
    <rect x="660" y="20" width="200" height="80" fill="#2ecc71" rx="5"/>
    <text x="670" y="40" font-size="12" font-weight="bold" fill="white">ML/AI Outputs</text>
    <text x="670" y="55" font-size="9" fill="white">session_embeddings.pkl</text>
    <text x="670" y="70" font-size="9" fill="white">visitor_recommendations.json</text>
    <text x="670" y="85" font-size="9" fill="white">similarity_scores.csv</text>
  </g>
  
  <!-- Neo4j Database Section -->
  <g transform="translate(1200, 350)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#2c3e50">NEO4J DATABASE</text>
    
    <rect x="0" y="20" width="320" height="400" fill="#34495e" rx="5"/>
    <text x="10" y="40" font-size="14" font-weight="bold" fill="white">Neo4j Graph Database</text>
    
    <!-- Visitor Nodes -->
    <text x="10" y="70" font-size="12" font-weight="bold" fill="white">Visitor Nodes:</text>
    <text x="10" y="85" font-size="10" fill="white">Visitor_this_year</text>
    <text x="10" y="100" font-size="10" fill="white">Visitor_last_year_bva</text>
    <text x="10" y="115" font-size="10" fill="white">Visitor_last_year_lva</text>
    
    <!-- Session Nodes -->
    <text x="10" y="140" font-size="12" font-weight="bold" fill="white">Session Nodes:</text>
    <text x="10" y="155" font-size="10" fill="white">Sessions_this_year</text>
    <text x="10" y="170" font-size="10" fill="white">Sessions_past_year</text>
    
    <!-- Stream Nodes -->
    <text x="10" y="195" font-size="12" font-weight="bold" fill="white">Stream Nodes:</text>
    <text x="10" y="210" font-size="10" fill="white">Stream (with embeddings)</text>
    
    <!-- Relationships -->
    <text x="10" y="235" font-size="12" font-weight="bold" fill="white">Relationships:</text>
    <text x="10" y="250" font-size="10" fill="white">HAS_STREAM (sessions to streams)</text>
    <text x="10" y="265" font-size="10" fill="white">attended_session (visitors to sessions)</text>
    <text x="10" y="280" font-size="10" fill="white">Same_Visitor (cross-year linkage)</text>
    <text x="10" y="295" font-size="10" fill="white">job_to_stream (jobs to streams)</text>
    <text x="10" y="310" font-size="10" fill="white">specialization_to_stream</text>
    
    <!-- ML Properties -->
    <text x="10" y="335" font-size="12" font-weight="bold" fill="white">ML Properties:</text>
    <text x="10" y="350" font-size="10" fill="white">Session embeddings (384-dim vectors)</text>
    <text x="10" y="365" font-size="10" fill="white">Similarity scores</text>
    <text x="10" y="380" font-size="10" fill="white">Recommendation weights</text>
    <text x="10" y="395" font-size="10" fill="white">Visitor behavior patterns</text>
  </g>
  
  <!-- Data Flow Arrows -->
  <!-- Input to Processing flows -->
  <path d="M 90 290 Q 90 320 90 380" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 290 290 Q 290 320 90 380" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 490 290 Q 490 320 490 380" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 690 290 Q 690 320 290 380" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 890 290 Q 890 450 490 490" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 890 290 Q 890 450 690 490" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Processing to Neo4j -->
  <path d="M 180 490 Q 600 490 1200 490" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 380 490 Q 600 490 1200 490" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 580 490 Q 600 490 1200 490" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 780 490 Q 600 490 1200 490" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 980 490 Q 600 490 1200 490" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- ML Processing flow -->
  <path d="M 380 600 Q 380 620 290 600" stroke="#9b59b6" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 380 600 Q 380 620 490 600" stroke="#9b59b6" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Processing to Outputs -->
  <path d="M 90 470 Q 90 600 100 740" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 290 470 Q 290 600 320 740" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 490 470 Q 490 600 540 740" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 490 630 Q 490 680 760 740" stroke="#9b59b6" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Step Number Circles -->
  <circle cx="90" cy="360" r="15" fill="#fff" stroke="#e74c3c" stroke-width="2"/>
  <text x="90" y="366" text-anchor="middle" font-size="12" font-weight="bold" fill="#e74c3c">1</text>
  
  <circle cx="290" cy="360" r="15" fill="#fff" stroke="#e74c3c" stroke-width="2"/>
  <text x="290" y="366" text-anchor="middle" font-size="12" font-weight="bold" fill="#e74c3c">2</text>
  
  <circle cx="490" cy="360" r="15" fill="#fff" stroke="#e74c3c" stroke-width="2"/>
  <text x="490" y="366" text-anchor="middle" font-size="12" font-weight="bold" fill="#e74c3c">3</text>
  
  <circle cx="90" cy="470" r="15" fill="#fff" stroke="#f39c12" stroke-width="2"/>
  <text x="90" y="476" text-anchor="middle" font-size="12" font-weight="bold" fill="#f39c12">4</text>
  
  <circle cx="290" cy="470" r="15" fill="#fff" stroke="#f39c12" stroke-width="2"/>
  <text x="290" y="476" text-anchor="middle" font-size="12" font-weight="bold" fill="#f39c12">5</text>
  
  <circle cx="490" cy="470" r="15" fill="#fff" stroke="#f39c12" stroke-width="2"/>
  <text x="490" y="476" text-anchor="middle" font-size="12" font-weight="bold" fill="#f39c12">6</text>
  
  <circle cx="690" cy="470" r="15" fill="#fff" stroke="#f39c12" stroke-width="2"/>
  <text x="690" y="476" text-anchor="middle" font-size="12" font-weight="bold" fill="#f39c12">7</text>
  
  <circle cx="890" cy="470" r="15" fill="#fff" stroke="#f39c12" stroke-width="2"/>
  <text x="890" y="476" text-anchor="middle" font-size="12" font-weight="bold" fill="#f39c12">8</text>
  
  <circle cx="290" cy="580" r="15" fill="#fff" stroke="#9b59b6" stroke-width="2"/>
  <text x="290" y="586" text-anchor="middle" font-size="12" font-weight="bold" fill="#9b59b6">9</text>
  
  <circle cx="490" cy="580" r="15" fill="#fff" stroke="#9b59b6" stroke-width="2"/>
  <text x="490" y="586" text-anchor="middle" font-size="12" font-weight="bold" fill="#9b59b6">10</text>
  
  <!-- Configuration Summary -->
  <g transform="translate(50, 950)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#2c3e50">PIPELINE CONFIGURATION SUMMARY</text>
    
    <rect x="0" y="20" width="1100" height="120" fill="#ecf0f1" stroke="#bdc3c7" rx="5"/>
    
    <text x="10" y="40" font-size="12" font-weight="bold" fill="#2c3e50">Key Configuration Parameters:</text>
    
    <text x="10" y="60" font-size="11" fill="#2c3e50">Event: BVA (main) with LVA (secondary) | Shows: BVA2025, BVA2024, LVS2024</text>
    <text x="10" y="75" font-size="11" fill="#2c3e50">Valid Badge Types: Delegate, Delegate - Group | Badge ID matching for cross-year visitor tracking</text>
    <text x="10" y="90" font-size="11" fill="#2c3e50">ML Model: all-MiniLM-L6-v2 (384-dim embeddings) | Batch Size: 100 | Min Similarity: 0.3 | Max Recommendations: 10</text>
    <text x="10" y="105" font-size="11" fill="#2c3e50">Neo4j: Visitor, Session, Stream nodes with HAS_STREAM, attended_session, Same_Visitor relationships</text>
    <text x="10" y="120" font-size="11" fill="#2c3e50">Stream Mappings: Job roles and specializations mapped to content streams for personalized recommendations</text>
  </g>
</svg>