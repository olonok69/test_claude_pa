<svg viewBox="0 0 3200 4800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .node { 
        fill: #e1f5fe; 
        stroke: #01579b; 
        stroke-width: 4px;
        rx: 10;
      }
      .source-node {
        fill: #fff3e0;
        stroke: #e65100;
        stroke-width: 4px;
        rx: 10;
      }
      .process-node {
        fill: #f3e5f5;
        stroke: #4a148c;
        stroke-width: 4px;
        rx: 10;
      }
      .manual-process-node {
        fill: #ffebee;
        stroke: #d32f2f;
        stroke-width: 4px;
        rx: 10;
      }
      .output-node {
        fill: #e8f5e9;
        stroke: #1b5e20;
        stroke-width: 4px;
        rx: 10;
      }
      .agent-node {
        fill: #fce4ec;
        stroke: #880e4f;
        stroke-width: 4px;
        rx: 10;
      }
      .text {
        font-family: Arial, sans-serif;
        font-size: 21px;
        text-anchor: middle;
      }
      .small-text {
        font-size: 18px;
      }
      .manual-label {
        font-size: 16px;
        fill: #d32f2f;
        font-weight: bold;
      }
      .arrow {
        fill: none;
        stroke: #333;
        stroke-width: 4px;
        marker-end: url(#arrowhead);
      }
      .dashed {
        stroke-dasharray: 10,10;
      }
      .title {
        font-size: 40px;
        font-weight: bold;
      }
      .section-title {
        font-size: 32px;
        font-weight: bold;
        text-anchor: start;
      }
    </style>
    <marker id="arrowhead" markerWidth="20" markerHeight="13" refX="20" refY="6.5" orient="auto">
      <polygon points="0 0, 20 6.5, 0 13" fill="#333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="1600" y="60" class="text title">Grain Market Intelligence Update Process - AI Agent Assisted Workflow</text>

  <!-- Main Flow Container -->
  <rect x="40" y="100" width="3120" height="4640" fill="none" stroke="#666" stroke-width="3" stroke-dasharray="20,10"/>
  
  <!-- Phase 1: Data Sources -->
  <text x="120" y="160" class="section-title">Phase 1: Data Collection from Multiple Sources</text>
  
  <!-- AI Agent -->
  <rect x="1360" y="200" width="480" height="80" class="agent-node"/>
  <text x="1600" y="250" class="text">AI Agent Controller</text>
  
  <!-- USDA Sources -->
  <g id="usda-sources">
    <rect x="80" y="360" width="400" height="80" class="source-node"/>
    <text x="280" y="410" class="text">USDA Sources</text>
    
    <rect x="80" y="480" width="400" height="70" class="node"/>
    <text x="280" y="523" class="text">WASDE Report (Monthly)</text>
    
    <rect x="80" y="570" width="400" height="70" class="node"/>
    <text x="280" y="613" class="text">Grain World Markets (Monthly)</text>
    
    <rect x="80" y="660" width="400" height="70" class="node"/>
    <text x="280" y="703" class="text">GAIN Reports (Weekly)</text>
    
    <rect x="80" y="750" width="400" height="70" class="node"/>
    <text x="280" y="793" class="text">World Agri Production (Monthly)</text>
    
    <rect x="80" y="840" width="400" height="70" class="node"/>
    <text x="280" y="883" class="text">PSD Reports (Various)</text>
  </g>
  
  <!-- IGC Sources -->
  <g id="igc-sources">
    <rect x="560" y="360" width="400" height="80" class="source-node"/>
    <text x="760" y="410" class="text">IGC Sources</text>
    
    <rect x="560" y="480" width="400" height="70" class="node"/>
    <text x="760" y="523" class="text">Supply &amp; Demand (Monthly)</text>
    
    <rect x="560" y="570" width="400" height="70" class="node"/>
    <text x="760" y="613" class="text">GMR Report (Monthly)</text>
  </g>
  
  <!-- Strategie Grains -->
  <g id="strategie-sources">
    <rect x="1040" y="360" width="400" height="80" class="source-node"/>
    <text x="1240" y="410" class="text">Stratégie Grains</text>
    
    <rect x="1040" y="480" width="400" height="70" class="node"/>
    <text x="1240" y="523" class="text">EU Grain Report (Monthly)</text>
    
    <rect x="1040" y="570" width="400" height="70" class="node"/>
    <text x="1240" y="613" class="text">EU S&amp;D Balance (Various)</text>
  </g>
  
  <!-- Market Data Sources -->
  <g id="market-sources">
    <rect x="1520" y="360" width="400" height="80" class="source-node"/>
    <text x="1720" y="410" class="text">Market Data</text>
    
    <rect x="1520" y="480" width="400" height="70" class="node"/>
    <text x="1720" y="523" class="text">Euronext MATIF (Daily)</text>
    
    <rect x="1520" y="570" width="400" height="70" class="node"/>
    <text x="1720" y="613" class="text">CME CBOT (Daily)</text>
    
    <rect x="1520" y="660" width="400" height="70" class="node"/>
    <text x="1720" y="703" class="text">Barchart Futures (Daily)</text>
    
    <rect x="1520" y="750" width="400" height="70" class="node"/>
    <text x="1720" y="793" class="text">Mintec/Fastmarkets (Daily)</text>
  </g>
  
  <!-- Weather & Monitoring -->
  <g id="weather-sources">
    <rect x="2000" y="360" width="400" height="80" class="source-node"/>
    <text x="2200" y="410" class="text">Weather &amp; Monitoring</text>
    
    <rect x="2000" y="480" width="400" height="70" class="node"/>
    <text x="2200" y="523" class="text">GEOGLAM (Monthly)</text>
    
    <rect x="2000" y="570" width="400" height="70" class="node"/>
    <text x="2200" y="613" class="text">JRC MARS Bulletin (Monthly)</text>
    
    <rect x="2000" y="660" width="400" height="70" class="node"/>
    <text x="2200" y="703" class="text">Crop/Weather Graphs (Monthly)</text>
  </g>
  
  <!-- EU Agridata -->
  <g id="eu-sources">
    <rect x="2480" y="360" width="400" height="80" class="source-node"/>
    <text x="2680" y="410" class="text">Cereals EU Agridata</text>
    
    <rect x="2480" y="480" width="400" height="70" class="node"/>
    <text x="2680" y="523" class="text">Prices/Production/Trade</text>
    
    <rect x="2480" y="570" width="400" height="70" class="node"/>
    <text x="2680" y="613" class="text">Dashboard (Monthly)</text>
  </g>
  
  <!-- Ingestion Methods -->
  <text x="120" y="1020" class="section-title">Phase 2: AI-Assisted Data Ingestion</text>
  
  <!-- Method 1: PDF Download (MANUAL) -->
  <rect x="80" y="1080" width="640" height="120" class="manual-process-node"/>
  <text x="400" y="1118" class="text">Method 1: PDF Download &amp; Ingestion</text>
  <text x="400" y="1148" class="manual-label">[MANUAL PROCESS]</text>
  <text x="400" y="1178" class="text small-text">Navigate → Download PDF → Vector Store</text>
  
  <!-- Method 2: Interactive Browse (MANUAL) -->
  <rect x="800" y="1080" width="640" height="120" class="manual-process-node"/>
  <text x="1120" y="1118" class="text">Method 2: Interactive Browsing</text>
  <text x="1120" y="1148" class="manual-label">[MANUAL PROCESS]</text>
  <text x="1120" y="1178" class="text small-text">Filter → Export (PDF/Excel) → Vector Store</text>
  
  <!-- Method 3: HTML Parse (AUTOMATED) -->
  <rect x="1520" y="1080" width="640" height="120" class="process-node"/>
  <text x="1840" y="1118" class="text">Method 3: HTML Parsing</text>
  <text x="1840" y="1148" class="text small-text" style="fill: #4a148c; font-weight: bold;">[AUTOMATED]</text>
  <text x="1840" y="1178" class="text small-text">Browse → Parse HTML → Extract Data</text>
  
  <!-- Method 4: Login & Download (MANUAL) -->
  <rect x="2240" y="1080" width="640" height="120" class="manual-process-node"/>
  <text x="2560" y="1118" class="text">Method 4: Login &amp; Download</text>
  <text x="2560" y="1148" class="manual-label">[MANUAL PROCESS]</text>
  <text x="2560" y="1178" class="text small-text">Login → Download → Vector Store</text>
  
  <!-- AI Processing -->
  <rect x="1000" y="1280" width="1200" height="120" class="agent-node"/>
  <text x="1600" y="1330" class="text">AI Agent: Context Creation &amp; Data Extraction</text>
  <text x="1600" y="1370" class="text small-text">Extract relevant 2025/2026 projections and market insights</text>
  
  <!-- Phase 3: Dashboard Updates -->
  <text x="120" y="1500" class="section-title">Phase 3: Update Supply &amp; Demand Dashboards</text>
  
  <!-- Corn Dashboard -->
  <rect x="400" y="1560" width="1000" height="160" class="output-node"/>
  <text x="900" y="1620" class="text" style="font-weight: bold;">Corn Dashboard Update (corn_dashboard_updated_july_2025.md)</text>
  <text x="900" y="1660" class="text small-text">Production • Export • Import • Ending Stocks • Stock-to-Use</text>
  <text x="900" y="1700" class="text small-text">Acreage • Yield • World Demand (2025/2026 column only)</text>
  
  <!-- Wheat Dashboard -->
  <rect x="1800" y="1560" width="1000" height="160" class="output-node"/>
  <text x="2300" y="1620" class="text" style="font-weight: bold;">Wheat Dashboard Update (wheat_dashboard_updated_july_2025.md)</text>
  <text x="2300" y="1660" class="text small-text">Production • Export • Import • Ending Stocks • Stock-to-Use</text>
  <text x="2300" y="1700" class="text small-text">Acreage • Yield • World Demand (2025/2026 column only)</text>
  
  <!-- AI Update Process -->
  <rect x="1000" y="1800" width="1200" height="120" class="agent-node"/>
  <text x="1600" y="1850" class="text">AI Agent: Dashboard Update Engine</text>
  <text x="1600" y="1890" class="text small-text">Parse extracted data → Match to dashboard fields → Update 2025/2026 projections</text>
  
  <!-- Phase 4: Database Update -->
  <text x="120" y="2020" class="section-title">Phase 4: Database Synchronization</text>
  
  <rect x="1000" y="2080" width="1200" height="120" class="output-node"/>
  <text x="1600" y="2130" class="text">Update Database with New Figures</text>
  <text x="1600" y="2170" class="text small-text">Sync corn and wheat data for interactive dashboard refresh</text>
  
  <!-- Phase 5: Report Generation -->
  <text x="120" y="2300" class="section-title">Phase 5: Market Direction Report Generation</text>
  
  <rect x="800" y="2360" width="1600" height="200" class="agent-node"/>
  <text x="1600" y="2425" class="text" style="font-weight: bold;">AI Agent: Report Analysis &amp; Synthesis</text>
  <text x="1600" y="2470" class="text small-text">1. Analyze all collected data and updated dashboards</text>
  <text x="1600" y="2510" class="text small-text">2. Extract key market trends, regional variations, and price drivers</text>
  <text x="1600" y="2545" class="text small-text">3. Update corn_wheat_report.md with comprehensive analysis</text>
  
  <!-- Final Output -->
  <rect x="1000" y="2640" width="1200" height="120" class="output-node"/>
  <text x="1600" y="2690" class="text" style="font-weight: bold;">Generate Final PDF Report</text>
  <text x="1600" y="2730" class="text small-text">European Wheat and Corn Market Direction Analysis</text>
  
  <!-- Data Flow Arrows -->
  <!-- Sources to Methods -->
  <path d="M 280 920 L 400 1080" class="arrow"/>
  <path d="M 760 640 L 1120 1080" class="arrow"/>
  <path d="M 1240 640 L 2560 1080" class="arrow"/>
  <path d="M 1720 840 L 1840 1080" class="arrow"/>
  <path d="M 2200 740 L 1120 1080" class="arrow"/>
  <path d="M 2680 640 L 1840 1080" class="arrow"/>
  
  <!-- Methods to AI Processing -->
  <path d="M 400 1200 L 1000 1280" class="arrow"/>
  <path d="M 1120 1200 L 1200 1280" class="arrow"/>
  <path d="M 1840 1200 L 1800 1280" class="arrow"/>
  <path d="M 2560 1200 L 2200 1280" class="arrow"/>
  
  <!-- AI to Dashboards -->
  <path d="M 1200 1400 L 900 1560" class="arrow"/>
  <path d="M 2000 1400 L 2300 1560" class="arrow"/>
  
  <!-- Dashboards to AI Update -->
  <path d="M 900 1720 L 1200 1800" class="arrow"/>
  <path d="M 2300 1720 L 2000 1800" class="arrow"/>
  
  <!-- AI Update to Database -->
  <path d="M 1600 1920 L 1600 2080" class="arrow"/>
  
  <!-- Database to Report Generation -->
  <path d="M 1600 2200 L 1600 2360" class="arrow"/>
  
  <!-- Report Generation to PDF -->
  <path d="M 1600 2560 L 1600 2640" class="arrow"/>
  
  <!-- AI Agent Control Lines (dashed) -->
  <path d="M 1600 280 L 1600 1280" class="arrow dashed"/>
  <path d="M 1600 280 L 1600 1800" class="arrow dashed"/>
  <path d="M 1600 280 L 1600 2460" class="arrow dashed"/>
  
  <!-- Legend -->
  <g id="legend" transform="translate(120, 2900)">
    <text x="0" y="0" class="text" style="font-size: 28px; font-weight: bold; text-anchor: start;">Legend:</text>
    
    <rect x="0" y="40" width="60" height="40" class="source-node"/>
    <text x="80" y="70" class="text" style="text-anchor: start;">Data Sources</text>
    
    <rect x="400" y="40" width="60" height="40" class="process-node"/>
    <text x="480" y="70" class="text" style="text-anchor: start;">Automated Process</text>
    
    <rect x="800" y="40" width="60" height="40" class="manual-process-node"/>
    <text x="880" y="70" class="text" style="text-anchor: start;">Manual Process</text>
    
    <rect x="1200" y="40" width="60" height="40" class="agent-node"/>
    <text x="1280" y="70" class="text" style="text-anchor: start;">AI Agent Processing</text>
    
    <rect x="1600" y="40" width="60" height="40" class="output-node"/>
    <text x="1680" y="70" class="text" style="text-anchor: start;">Outputs/Updates</text>
    
    <line x1="2000" y1="60" x2="2100" y2="60" class="arrow"/>
    <text x="2120" y="70" class="text" style="text-anchor: start;">Data Flow</text>
    
    <line x1="2400" y1="60" x2="2500" y2="60" class="arrow dashed"/>
    <text x="2520" y="70" class="text" style="text-anchor: start;">AI Control</text>
  </g>
  
  <!-- Key Process Notes -->
  <g id="notes" transform="translate(120, 3100)">
    <text x="0" y="0" class="text" style="font-size: 28px; font-weight: bold; text-anchor: start;">Key Process Notes:</text>
    
    <text x="0" y="60" class="text" style="text-anchor: start;">• Manual Processes: Methods 1, 2, and 4 require manual intervention for data collection</text>
    <text x="0" y="100" class="text" style="text-anchor: start;">• Automated Process: Method 3 (HTML Parsing) can be fully automated</text>
    <text x="0" y="140" class="text" style="text-anchor: start;">• Monthly Updates: Most sources update monthly, with market data updating daily</text>
    <text x="0" y="180" class="text" style="text-anchor: start;">• AI Agents: Assist in data extraction, context creation, and report synthesis</text>
    <text x="0" y="220" class="text" style="text-anchor: start;">• Focus: Only 2025/2026 projection columns are updated in dashboards</text>
    <text x="0" y="260" class="text" style="text-anchor: start;">• Vector Store: All PDFs and documents are indexed for AI retrieval</text>
    <text x="0" y="300" class="text" style="text-anchor: start;">• Final Output: Comprehensive market direction PDF report with all insights</text>
  </g>
  
  <!-- Update Frequency Indicators -->
  <g id="frequency" transform="translate(120, 3500)">
    <text x="0" y="0" class="text" style="font-size: 28px; font-weight: bold; text-anchor: start;">Update Frequencies:</text>
    
    <circle cx="20" cy="60" r="16" fill="#4caf50"/>
    <text x="50" y="70" class="text" style="text-anchor: start;">Daily: Market futures, pricing data</text>
    
    <circle cx="20" cy="110" r="16" fill="#2196f3"/>
    <text x="50" y="120" class="text" style="text-anchor: start;">Weekly: GAIN reports</text>
    
    <circle cx="20" cy="160" r="16" fill="#ff9800"/>
    <text x="50" y="170" class="text" style="text-anchor: start;">Monthly: Most agricultural reports, weather data</text>
    
    <circle cx="20" cy="210" r="16" fill="#9c27b0"/>
    <text x="50" y="220" class="text" style="text-anchor: start;">Variable: PSD reports, balance sheets</text>
  </g>
</svg>