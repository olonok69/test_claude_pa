<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    MSSQL MCP Server Architecture - Claude.ai Integration
  </text>
  
  <!-- Users Section -->
  <g id="users">
    <rect x="50" y="100" width="200" height="250" rx="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="150" y="130" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      CORPORATE USERS
    </text>
    
    <!-- User Groups -->
    <rect x="70" y="150" width="160" height="60" rx="5" fill="#5dade2" opacity="0.8"/>
    <text x="150" y="175" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">Finance Team</text>
    <text x="150" y="195" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Read/Write Access</text>
    
    <rect x="70" y="220" width="160" height="60" rx="5" fill="#5dade2" opacity="0.8"/>
    <text x="150" y="245" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">Operations Team</text>
    <text x="150" y="265" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Read-Only Access</text>
    
    <rect x="70" y="290" width="160" height="50" rx="5" fill="#5dade2" opacity="0.8"/>
    <text x="150" y="315" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">Analysts</text>
    <text x="150" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Read-Only Access</text>
  </g>
  
  <!-- Claude.ai Platform -->
  <g id="claude-platform">
    <rect x="350" y="100" width="250" height="250" rx="10" fill="#9b59b6" stroke="#8e44ad" stroke-width="2"/>
    <text x="475" y="130" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      CLAUDE.AI PLATFORM
    </text>
    
    <!-- Claude Features -->
    <rect x="370" y="150" width="210" height="50" rx="5" fill="#af7ac5" opacity="0.9"/>
    <text x="475" y="170" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">Corporate Account</text>
    <text x="475" y="190" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">SSO Authentication</text>
    
    <rect x="370" y="210" width="210" height="60" rx="5" fill="#af7ac5" opacity="0.9"/>
    <text x="475" y="230" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">MCP Client</text>
    <text x="475" y="245" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Built-in MCP Support</text>
    <text x="475" y="260" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Natural Language Interface</text>
    
    <rect x="370" y="280" width="210" height="50" rx="5" fill="#af7ac5" opacity="0.9"/>
    <text x="475" y="300" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">AI Assistant</text>
    <text x="475" y="320" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Query Generation and Analysis</text>
  </g>
  
  <!-- Internet/HTTPS Layer -->
  <g id="internet">
    <rect x="650" y="180" width="150" height="100" rx="10" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
    <text x="725" y="210" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      INTERNET
    </text>
    <text x="725" y="235" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">HTTPS/TLS</text>
    <text x="725" y="255" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port 443</text>
  </g>
  
  <!-- GCP Infrastructure -->
  <g id="gcp">
    <rect x="850" y="80" width="320" height="290" rx="10" fill="#f39c12" stroke="#e67e22" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="1010" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#e67e22">
      GOOGLE CLOUD PLATFORM
    </text>
    
    <!-- Nginx Reverse Proxy -->
    <rect x="870" y="120" width="280" height="70" rx="5" fill="#34495e" stroke="#2c3e50" stroke-width="2"/>
    <text x="1010" y="145" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      NGINX REVERSE PROXY
    </text>
    <text x="1010" y="165" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">SSL Termination</text>
    <text x="1010" y="180" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Let's Encrypt Certificates</text>
    
    <!-- MCP Server Container -->
    <rect x="870" y="210" width="280" height="140" rx="5" fill="#27ae60" stroke="#229954" stroke-width="2"/>
    <text x="1010" y="235" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      MCP SERVER CONTAINER
    </text>
    <text x="1010" y="255" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Python/Starlette</text>
    <text x="1010" y="275" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">SSE Transport (Port 8008)</text>
    <text x="1010" y="295" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">OAuth 2.0 Authentication</text>
    <text x="1010" y="315" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Read-Only Mode Available</text>
    <text x="1010" y="335" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">SQL Query Validation</text>
  </g>
  
  <!-- MSSQL Database -->
  <g id="database">
    <rect x="850" y="420" width="320" height="200" rx="10" fill="#2c3e50" stroke="#1a252f" stroke-width="2"/>
    <text x="1010" y="450" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      MSSQL DATABASE
    </text>
    <text x="1010" y="475" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#95a5a6">
      Microsoft SQL Server
    </text>
    
    <!-- Database Features -->
    <rect x="870" y="490" width="280" height="110" rx="5" fill="#34495e" opacity="0.8"/>
    <text x="1010" y="515" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">Available Tools:</text>
    <text x="1010" y="535" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#ecf0f1">• list_tables</text>
    <text x="1010" y="555" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#ecf0f1">• describe_table</text>
    <text x="1010" y="575" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#ecf0f1">• execute_sql (SELECT only in read-only)</text>
    <text x="1010" y="595" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#ecf0f1">• get_table_sample</text>
  </g>
  
  <!-- Arrows and Flow -->
  <!-- Users to Claude -->
  <path d="M 250 225 L 350 225" stroke="#3498db" stroke-width="3" fill="none" marker-end="url(#arrowblue)"/>
  <text x="300" y="215" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">Browser</text>
  
  <!-- Claude to Internet -->
  <path d="M 600 230 L 650 230" stroke="#9b59b6" stroke-width="3" fill="none" marker-end="url(#arrowpurple)"/>
  <text x="625" y="220" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">MCP/SSE</text>
  
  <!-- Internet to GCP -->
  <path d="M 800 230 L 870 155" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowred)"/>
  <text x="835" y="185" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">HTTPS</text>
  
  <!-- Nginx to MCP Server -->
  <path d="M 1010 190 L 1010 210" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowgray)"/>
  
  <!-- MCP Server to Database -->
  <path d="M 1010 350 L 1010 420" stroke="#27ae60" stroke-width="3" fill="none" marker-end="url(#arrowgreen)"/>
  <text x="1040" y="385" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">ODBC</text>
  
  <!-- Security Labels -->
  <g id="security-labels">
    <!-- OAuth Badge -->
    <rect x="50" y="400" width="120" height="30" rx="15" fill="#e74c3c"/>
    <text x="110" y="420" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">OAuth 2.0</text>
    
    <!-- SSL Badge -->
    <rect x="180" y="400" width="120" height="30" rx="15" fill="#27ae60"/>
    <text x="240" y="420" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">SSL/TLS</text>
    
    <!-- Read-Only Badge -->
    <rect x="310" y="400" width="120" height="30" rx="15" fill="#3498db"/>
    <text x="370" y="420" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Read-Only Mode</text>
  </g>
  
  <!-- Key Features Box -->
  <g id="features">
    <rect x="50" y="460" width="380" height="140" rx="10" fill="white" stroke="#bdc3c7" stroke-width="1"/>
    <text x="240" y="485" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Key Features
    </text>
    <text x="70" y="510" font-family="Arial, sans-serif" font-size="12" fill="#34495e">✓ Natural language SQL queries through Claude.ai</text>
    <text x="70" y="530" font-family="Arial, sans-serif" font-size="12" fill="#34495e">✓ Corporate SSO authentication</text>
    <text x="70" y="550" font-family="Arial, sans-serif" font-size="12" fill="#34495e">✓ Configurable read-only mode for safety</text>
    <text x="70" y="570" font-family="Arial, sans-serif" font-size="12" fill="#34495e">✓ OAuth 2.0 token-based access control</text>
    <text x="70" y="590" font-family="Arial, sans-serif" font-size="12" fill="#34495e">✓ Automatic SSL certificate management</text>
  </g>
  
  <!-- Data Flow Description -->
  <g id="dataflow">
    <rect x="470" y="460" width="380" height="140" rx="10" fill="white" stroke="#bdc3c7" stroke-width="1"/>
    <text x="660" y="485" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Data Flow
    </text>
    <text x="490" y="510" font-family="Arial, sans-serif" font-size="12" fill="#34495e">1. User logs into Claude.ai with corporate account</text>
    <text x="490" y="530" font-family="Arial, sans-serif" font-size="12" fill="#34495e">2. User connects to MCP server via SSE endpoint</text>
    <text x="490" y="550" font-family="Arial, sans-serif" font-size="12" fill="#34495e">3. Claude.ai authenticates via OAuth 2.0</text>
    <text x="490" y="570" font-family="Arial, sans-serif" font-size="12" fill="#34495e">4. User queries database using natural language</text>
    <text x="490" y="590" font-family="Arial, sans-serif" font-size="12" fill="#34495e">5. Results stream back through SSE connection</text>
  </g>
  
  <!-- MCP Protocol Label -->
  <rect x="500" y="370" width="200" height="40" rx="20" fill="#f39c12" opacity="0.9"/>
  <text x="600" y="395" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    MCP Protocol v2025-06-18
  </text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#3498db"/>
    </marker>
    <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#9b59b6"/>
    </marker>
    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#e74c3c"/>
    </marker>
    <marker id="arrowgray" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#34495e"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#27ae60"/>
    </marker>
  </defs>
</svg>