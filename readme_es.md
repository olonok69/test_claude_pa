# üé¨ Traductor de Videos con IA

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![FFmpeg](https://img.shields.io/badge/FFmpeg-requerido-red.svg)](https://ffmpeg.org/)
[![License: MIT](https://img.shields.io/badge/Licencia-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Multiplataforma](https://img.shields.io/badge/plataforma-Windows%20%7C%20Linux-lightgrey.svg)]()

Un potente sistema de traducci√≥n de videos impulsado por IA, **completamente gratuito** y **local**, que traduce videos en espa√±ol al ingl√©s utilizando modelos de aprendizaje autom√°tico de vanguardia. Sin servicios en la nube, sin suscripciones, sin preocupaciones de privacidad de datos: ¬°todo funciona en tu m√°quina!

## ‚ú® Caracter√≠sticas Principales

- üéØ **Alta Precisi√≥n** en transcripci√≥n y traducci√≥n usando modelos de IA de vanguardia
- ‚ö° **Procesamiento R√°pido** con soporte GPU/CUDA para aceleraci√≥n por hardware
- üîß **Manejo Robusto de Errores** para procesamiento confiable de varios formatos de video
- üì± **Soporte Multiplataforma** (Windows 10/11 y Ubuntu Linux)
- üé® **M√∫ltiples Opciones de Voz** incluyendo Edge TTS de alta calidad y voces del sistema
- üìπ **Amplio Soporte de Formatos** (.mp4, .avi, .mov, .mkv, .webm)
- ‚è±Ô∏è **Soporte para Videos Largos** hasta 2+ horas con procesamiento inteligente por segmentos
- üîÑ **Eficiente en Memoria** procesamiento basado en segmentos para archivos grandes
- üé§ **Procesamiento Avanzado de Audio** con reducci√≥n de ruido y normalizaci√≥n
- üîí **100% Procesamiento Local** - tus videos nunca salen de tu computadora

## üé• C√≥mo Funciona

![Proceso de Traducci√≥n de Video](pipeline.png)

El proceso de traducci√≥n sigue estos pasos:

### 1. üéµ Extracci√≥n de Audio
- Extrae la pista de audio del video usando FFmpeg
- Optimiza el audio para reconocimiento de voz (16kHz PCM, canal mono)
- Aplica filtros de reducci√≥n de ruido y normalizaci√≥n

### 2. üé§ Reconocimiento de Voz
- Transcribe audio en espa√±ol a texto usando **OpenAI Whisper**
- Soporta m√∫ltiples tama√±os de modelo (base, medium, large)
- Manejo robusto de errores para varias calidades de audio

### 3. üåê Traducci√≥n de Texto
- Traduce texto en espa√±ol al ingl√©s usando **transformador Helsinki-NLP**
- Fragmentaci√≥n inteligente de texto para calidad √≥ptima de traducci√≥n
- Mantiene el contexto a trav√©s de textos largos

### 4. üó£Ô∏è Texto a Voz
- Genera audio en ingl√©s usando **Edge TTS** o TTS del sistema
- M√∫ltiples opciones de voz con habla de sonido natural
- Calidad de audio y sincronizaci√≥n optimizadas

### 5. üé¨ Procesamiento de Video
- Reemplaza el audio original con el audio traducido
- Preserva la calidad del video y sincronizaci√≥n
- Mantiene el formato original del video y metadatos

### 6. üíæ Generaci√≥n de Salida
- Crea el video final con pista de audio en ingl√©s
- Sin p√©rdida de calidad en el procesamiento de video
- Compatible con todos los reproductores de video principales

## ü§ñ Modelos de IA Utilizados

![Arquitectura de Modelos de IA](ai_models_use.png)

| Modelo | Prop√≥sito | Descripci√≥n |
|--------|-----------|-------------|
| **OpenAI Whisper** | Reconocimiento de Voz | Modelo de vanguardia entrenado con 680,000 horas de datos de audio multiling√ºes |
| **Helsinki-NLP opus-mt** | Traducci√≥n | Traducci√≥n autom√°tica neuronal de alta calidad espec√≠ficamente para Espa√±ol‚ÜíIngl√©s |
| **Edge TTS / pyttsx3** | Texto a Voz | Motores TTS avanzados que proporcionan voces en ingl√©s de sonido natural |

## üöÄ Inicio R√°pido

### Requisitos Previos
- Python 3.11 o 3.12
- FFmpeg (para procesamiento de video/audio)
- Al menos 4GB RAM (8GB+ recomendado para videos largos)

### Instalaci√≥n

**Opci√≥n 1: Windows**
```bash
# Instalar Python, FFmpeg y Visual C++ Redistributable
# Ver gu√≠a detallada de instalaci√≥n para Windows abajo

# Instalar gestor de paquetes UV
irm https://astral.sh/uv/install.ps1 | iex

# Crear proyecto
mkdir video-translator && cd video-translator
uv init && uv venv
.venv\Scripts\activate

# Instalar dependencias
uv pip install -r requirements.txt
```

**Opci√≥n 2: Ubuntu Linux**
```bash
# Instalar dependencias del sistema
sudo apt update && sudo apt install -y python3-dev ffmpeg build-essential

# Instalar gestor de paquetes UV
curl -LsSf https://astral.sh/uv/install.sh | sh

# Crear proyecto
mkdir video-translator && cd video-translator
uv init && uv venv
source .venv/bin/activate

# Instalar dependencias
uv pip install -r requirements.txt
```

### Uso B√°sico

```bash
# Traducci√≥n simple
python video_translator.py video_espa√±ol.mp4 video_ingles.mp4

# Traducci√≥n de alta calidad con Edge TTS
python video_translator.py entrada.mp4 salida.mp4 --edge-tts

# Para videos largos (2+ horas)
python video_translator.py pelicula_larga.mp4 pelicula_larga_en.mp4 --edge-tts --segment-length 600

# Archivo batch de Windows (arrastrar y soltar)
translate_video.bat "Mi Video.mp4" "My Video.mp4"
```

## üìã Scripts Disponibles

| Script | Prop√≥sito | Mejor Para |
|--------|-----------|------------|
| `video_translator.py` | Traducci√≥n est√°ndar de video | Videos menores a 1 hora |
| `test_installation.py` | Verificar instalaci√≥n | Probar configuraci√≥n |
| `audio_debug_script.py` | Depurar problemas de audio | Soluci√≥n de problemas |
| `translate_video.bat` | Wrapper de Windows | Uso f√°cil en Windows |

## üé§ Opciones de Voz

### Voces Edge TTS (Recomendadas)
| Voz | G√©nero | Acento | Estilo |
|-----|--------|---------|--------|
| `en-US-AriaNeural` | Femenina | Americano | Natural (predeterminada) |
| `en-US-JennyNeural` | Femenina | Americano | Amigable |
| `en-US-GuyNeural` | Masculina | Americano | Natural |
| `en-US-DavisNeural` | Masculina | Americano | Expresiva |
| `en-GB-SoniaNeural` | Femenina | Brit√°nico | Natural |
| `en-GB-RyanNeural` | Masculina | Brit√°nico | Natural |

### Ejemplos de Uso
```bash
# Usar voz espec√≠fica
python video_translator.py entrada.mp4 salida.mp4 --edge-tts --voice en-US-GuyNeural

# Acento brit√°nico
python video_translator.py entrada.mp4 salida.mp4 --edge-tts --voice en-GB-SoniaNeural
```

## ‚öôÔ∏è Configuraci√≥n Avanzada

### Procesamiento de Videos Largos
Para videos m√°s largos de 1 hora, usa procesamiento basado en segmentos:

```bash
# Procesar pel√≠cula de 2 horas con segmentos de 10 minutos
python video_translator.py pelicula.mp4 pelicula_en.mp4 --segment-length 600

# Segmentos m√°s peque√±os para mejor uso de memoria
python video_translator.py pelicula.mp4 pelicula_en.mp4 --segment-length 300
```

### Aceleraci√≥n GPU
Para procesamiento m√°s r√°pido con GPUs NVIDIA:

```bash
# Instalar PyTorch habilitado para CUDA
uv pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# El sistema detecta y usa GPU autom√°ticamente
```

### Depurar Problemas de Audio
```bash
# Analizar y corregir problemas de audio
python audio_debug_script.py video_problematico.mp4

# Probar diferentes m√©todos de extracci√≥n
python audio_debug_script.py video.mp4 --extract-only
```

## üìä Estimaciones de Rendimiento

| Duraci√≥n del Video | Tiempo de Procesamiento | Uso de RAM | Almacenamiento Necesario |
|-------------------|------------------------|------------|-------------------------|
| 30 minutos | 15-60 minutos | 2-4 GB | 5 GB temp |
| 1 hora | 30-120 minutos | 4-6 GB | 10 GB temp |
| 2 horas | 1-2 horas | 6-8 GB | 20 GB temp |

*Los tiempos var√≠an seg√∫n el hardware, calidad del video y modelos elegidos*

## üõ†Ô∏è Gu√≠as Detalladas de Instalaci√≥n

<details>
<summary><strong>ü™ü Instalaci√≥n en Windows (Clic para expandir)</strong></summary>

### Requisitos Previos
1. **Instalar Python 3.11 o 3.12**
   - Descargar de [python.org](https://www.python.org/downloads/windows/)
   - ‚úÖ **IMPORTANTE**: Marcar "Add Python to PATH"

2. **Instalar FFmpeg**
   ```powershell
   # Opci√≥n 1: Chocolatey (recomendado)
   choco install ffmpeg
   
   # Opci√≥n 2: Descarga manual de ffmpeg.org
   # Extraer a C:\ffmpeg y agregar C:\ffmpeg\bin al PATH
   ```

3. **Instalar Visual C++ Redistributable**
   - Descargar del [sitio web de Microsoft](https://aka.ms/vs/17/release/vc_redist.x64.exe)

### Pasos de Configuraci√≥n
```cmd
# Instalar gestor de paquetes UV
irm https://astral.sh/uv/install.ps1 | iex

# Crear proyecto
mkdir video-translator
cd video-translator
uv init
uv venv

# Activar entorno
.venv\Scripts\activate

# Instalar dependencias
uv pip install -r requirements.txt
uv pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu

# Probar instalaci√≥n
python test_installation.py
```

### Uso
```cmd
# Uso b√°sico
python video_translator.py "video_espa√±ol.mp4" "video_ingles.mp4"

# O usar el archivo batch
translate_video.bat "Mi Video.mp4" "My Video.mp4" --edge-tts
```

</details>

<details>
<summary><strong>üêß Instalaci√≥n en Ubuntu Linux (Clic para expandir)</strong></summary>

### Requisitos Previos
```bash
# Actualizar sistema
sudo apt update && sudo apt upgrade -y

# Instalar dependencias del sistema
sudo apt install -y build-essential curl git python3-dev python3-pip

# Instalar FFmpeg y librer√≠as de audio
sudo apt install -y ffmpeg libavcodec-extra espeak espeak-data

# Instalar PortAudio para procesamiento de audio
sudo apt install -y portaudio19-dev python3-pyaudio libasound2-dev

# Dependencias del sistema de audio
sudo apt install -y pulseaudio pulseaudio-utils alsa-utils
```

### Pasos de Configuraci√≥n
```bash
# Instalar gestor de paquetes UV
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.bashrc

# Crear proyecto
mkdir video-translator && cd video-translator
uv init && uv venv

# Activar entorno
source .venv/bin/activate

# Instalar dependencias
uv pip install -r requirements.txt
uv pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu

# Probar instalaci√≥n
python test_installation.py
```

### Uso
```bash
# Uso b√°sico
python video_translator.py video_espa√±ol.mp4 video_ingles.mp4

# O usar el script shell
./translate_video.sh video_espa√±ol.mp4 video_ingles.mp4
```

</details>

## üîß Soluci√≥n de Problemas

### Problemas Comunes

**üéµ Problemas de Audio/TTS**
```bash
# Probar audio del sistema
speaker-test -t sine -f 1000 -l 1

# Instalar voces adicionales (Ubuntu)
sudo apt install -y espeak-ng espeak-ng-data

# Windows: Verificar voces TTS de Windows en Configuraci√≥n
```

**üé¨ FFmpeg No Encontrado**
```bash
# Verificar instalaci√≥n de FFmpeg
ffmpeg -version
ffprobe -version

# Ubuntu: Instalar FFmpeg
sudo apt install -y ffmpeg

# Windows: Agregar al PATH o reinstalar
```

**üß† Problemas de Memoria (Videos Largos)**
```bash
# Usar segmentos m√°s peque√±os
python video_translator.py pelicula.mp4 pelicula_en.mp4 --segment-length 300

# Forzar procesamiento CPU (m√°s estable)
CUDA_VISIBLE_DEVICES= python video_translator.py entrada.mp4 salida.mp4
```

**ü§ñ Errores de Whisper NaN/Logits**
```bash
# Depurar el audio primero
python audio_debug_script.py video_problematico.mp4

# Usar configuraciones m√°s conservadoras
python video_translator.py entrada.mp4 salida.mp4 --conservative
```

### Obtener Ayuda

1. **Ejecutar el script de prueba**: `python test_installation.py`
2. **Verificar la herramienta de depuraci√≥n**: `python audio_debug_script.py tu_video.mp4`
3. **Revisar logs**: Todas las operaciones se registran con mensajes de error detallados
4. **Probar segmentos m√°s peque√±os**: Para videos largos, reducir `--segment-length`

## üìÅ Estructura del Proyecto

```
video-translator/
‚îú‚îÄ‚îÄ .venv/                      # Entorno virtual
‚îú‚îÄ‚îÄ video_translator.py         # Aplicaci√≥n principal (videos est√°ndar)
‚îú‚îÄ‚îÄ audio_debug_script.py       # Herramienta de depuraci√≥n de audio
‚îú‚îÄ‚îÄ test_installation.py        # Verificaci√≥n de instalaci√≥n
‚îú‚îÄ‚îÄ translate_video.bat         # Wrapper batch de Windows
‚îú‚îÄ‚îÄ translate_video.sh          # Wrapper shell de Linux
‚îú‚îÄ‚îÄ requirements.txt            # Dependencias de Python
‚îú‚îÄ‚îÄ pyproject.toml             # Configuraci√≥n del proyecto UV
‚îú‚îÄ‚îÄ pipeline.html              # Visualizaci√≥n del proceso
‚îú‚îÄ‚îÄ pipeline.png               # Diagrama de flujo del proceso
‚îú‚îÄ‚îÄ ai_models_use.png          # Arquitectura de modelos de IA
‚îî‚îÄ‚îÄ README.md                  # Este archivo
```

## üîÑ Flujos de Trabajo de Ejemplo

### Traducci√≥n B√°sica
```bash
# 1. Poner tu video en espa√±ol en la carpeta del proyecto
# 2. Ejecutar traducci√≥n
python video_translator.py "conferencia_espa√±ol.mp4" "conference_english.mp4"

# 3. El video traducido se crear√° con audio en ingl√©s
```

### Traducci√≥n de Alta Calidad
```bash
# Usar Edge TTS para mejor calidad de voz
python video_translator.py entrada.mp4 salida.mp4 \
  --edge-tts \
  --voice en-US-AriaNeural
```

### Procesamiento de Videos Largos
```bash
# Para videos de 2+ horas, usar procesamiento por segmentos
python video_translator.py "pelicula_larga.mp4" "long_movie_en.mp4" \
  --edge-tts \
  --segment-length 600  # Segmentos de 10 minutos
```

## üìà Formatos Soportados

### Formatos de Entrada
- **Video**: .mp4, .avi, .mov, .mkv, .webm, .flv
- **Audio**: .wav, .mp3, .m4a, .flac (para procesamiento solo de audio)

### Formatos de Salida
- **Video**: Mismo formato que la entrada
- **Audio**: Codificaci√≥n AAC para amplia compatibilidad

## üéØ Casos de Uso

- **üìö Contenido Educativo**: Traducir conferencias, tutoriales, cursos en espa√±ol
- **üé¨ Entretenimiento**: Traducir pel√≠culas, documentales, programas
- **üíº Negocios**: Traducir presentaciones, reuniones, videos de entrenamiento
- **üì∫ Creaci√≥n de Contenido**: Traducir videos de YouTube, vlogs, entrevistas
- **üèõÔ∏è Accesibilidad**: Hacer contenido en espa√±ol accesible para hablantes de ingl√©s

## ‚ö° Consejos de Rendimiento

1. **Usar almacenamiento SSD** para operaciones m√°s r√°pidas de E/S de archivos
2. **Cerrar programas innecesarios** durante el procesamiento
3. **Habilitar aceleraci√≥n GPU** para mejora de velocidad de 2-3x
4. **Usar modelos Whisper m√°s grandes** (medium/large) para mejor precisi√≥n
5. **Optimizar longitud de segmento** basado en RAM disponible
6. **Usar Edge TTS** para salida de voz de mayor calidad

## üÜö Comparaci√≥n con Otras Soluciones

| Caracter√≠stica | Esta Herramienta | Servicios en la Nube | Otras Herramientas Locales |
|---------------|------------------|---------------------|---------------------------|
| **Costo** | Gratis | $10-50/hora | $50-500 pago √∫nico |
| **Privacidad** | 100% Local | Basado en la nube | Var√≠a |
| **Calidad** | Alta | Muy Alta | Media |
| **Velocidad** | R√°pida | Muy R√°pida | Lenta |
| **Sin Internet** | ‚úÖ S√≠ | ‚ùå No | ‚úÖ S√≠ |
| **Uso Ilimitado** | ‚úÖ S√≠ | ‚ùå No | ‚úÖ S√≠ |

## üõ°Ô∏è Privacidad y Seguridad

- **üîí Privacidad Completa**: Todo el procesamiento ocurre localmente en tu m√°quina
- **üö´ Sin Recolecci√≥n de Datos**: Sin telemetr√≠a, anal√≠ticas o subida de datos
- **üìÅ Almacenamiento Local**: Videos y modelos almacenados solo en tu computadora
- **üîì C√≥digo Abierto**: Todo el c√≥digo es transparente y auditable
- **‚ö° Operaci√≥n Sin Internet**: Funciona sin conexi√≥n a internet (despu√©s de la configuraci√≥n inicial)

## üìÑ Licencia

Este proyecto est√° licenciado bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para detalles.

## ü§ù Contribuciones

¬°Las contribuciones son bienvenidas! Por favor, si√©ntete libre de enviar un Pull Request. Para cambios importantes, por favor abre un issue primero para discutir lo que te gustar√≠a cambiar.

## üí° Mejoras Futuras

- üåç Pares de idiomas adicionales (Franc√©s‚ÜîIngl√©s, Alem√°n‚ÜîIngl√©s)
- üé• Traducci√≥n en tiempo real para transmisiones en vivo
- üéõÔ∏è Interfaz gr√°fica para usuarios no t√©cnicos
- üîß M√°s opciones de voz TTS y personalizaci√≥n
- üì± Versi√≥n de aplicaci√≥n m√≥vil
- üé® Generaci√≥n e incrustaci√≥n de subt√≠tulos
- ü§ñ Integraci√≥n con otros modelos de IA

## üìû Soporte

Si encuentras alg√∫n problema o tienes preguntas:

1. Revisar la secci√≥n de soluci√≥n de problemas arriba
2. Ejecutar `python test_installation.py` para verificar tu configuraci√≥n
3. Usar `python audio_debug_script.py` para problemas relacionados con audio
4. Revisar los logs de error detallados para problemas espec√≠ficos

---